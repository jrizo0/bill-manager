(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{6380:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return i(3173)}])},4580:function(e,n,i){"use strict";function l(e){let n=e.toString();e instanceof Error||!e.message||(n=e.message),console.error("ONERROR: -->",e),alert(n)}i.d(n,{q:function(){return l}})},3173:function(e,n,i){"use strict";i.r(n),i.d(n,{__N_SSP:function(){return E},default:function(){return P}});var l=i(7458),r=i(880),t=i(890),s=i(3856),a=i(8167),o=i(1606),c=i(9343),d=i(99),x=i(2933),h=i(2983),u=i(4759),f=i(2053),b=i(670),j=i(4020),p=i(3753),m=i(522),g=i(1612);function y(e){let{onConfirm:n}=e,[i,r]=h.useState(!1),t=()=>{r(!0)},a=()=>{r(!1)},o=()=>{r(!1),n()};return(0,l.jsxs)("div",{children:[(0,l.jsx)(m.Z,{color:"error","aria-label":"upload picture",component:"label",onClick:t,children:(0,l.jsx)(g.Z,{})}),(0,l.jsxs)(u.Z,{open:i,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,l.jsx)(p.Z,{id:"alert-dialog-title",children:"Confirmation"}),(0,l.jsx)(b.Z,{children:(0,l.jsx)(j.Z,{id:"alert-dialog-description",children:"Are you sure you wnat to delete the bill?"})}),(0,l.jsxs)(f.Z,{children:[(0,l.jsx)(s.Z,{onClick:a,children:"Cancel"}),(0,l.jsx)(s.Z,{onClick:o,children:"Confirm"})]})]})]})}let Z=e=>{let{bill:n,onPayBill:i,onDeleteBill:h,isLoading:u}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(c.ZP,{sx:{py:3,display:"flex",justifyContent:"space-between",alignItems:"center"},divider:!0,secondaryAction:u?(0,l.jsx)(a.Z,{size:20}):(0,l.jsx)(y,{onConfirm:()=>{h(n.billID)}}),children:[(0,l.jsxs)(t.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,l.jsxs)(t.Z,{sx:{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"baseline"},children:[(0,l.jsxs)(x.Z,{variant:"body1",sx:{fontWeight:"bold",ml:2},children:[n.tag.trim().split("\n").slice(0,3),":"]}),(0,l.jsx)(d.Z,{title:"Copy",children:(0,l.jsx)(s.Z,{variant:"text",onClick:()=>{navigator.clipboard.writeText(n.reference)},size:"large",sx:{color:"#000000",textTransform:"none"},children:n.reference})}),function(){let e=n.expirationDay-new Date().getDate();return n.paid?(0,l.jsx)(l.Fragment,{}):e>0?(0,l.jsxs)(x.Z,{variant:"body1",sx:{fontWeight:"regular",mx:2},children:["Expires in ",e," days"]}):(0,l.jsxs)(x.Z,{variant:"body1",sx:{fontWeight:"bold",mx:2,color:"#FF0000"},children:["Expired ",-e," days ago"]})}()]}),(0,l.jsx)(o.Z,{href:n.paymentWeb,target:"_blank",rel:"noopener noreferrer",sx:{mx:2,my:1,fontWeight:"regular"},children:new URL(n.paymentWeb).host})]}),(0,l.jsx)(t.Z,{sx:{mx:2},children:n.paid?(0,l.jsx)("span",{className:"billPaid",children:"Pagada"}):(0,l.jsx)(r.Z,{loading:u,variant:"contained",disabled:u,onClick:()=>i(n.billID),children:"Pay bill"})})]})})};var w=i(7959),v=i(4865),_=i(903),C=i(5034),D=i(4445),N=i(4580);let k=e=>{let{data:n}=e,[i,r]=(0,h.useState)(n),[t,s]=(0,h.useState)(!1);async function a(e){s(!0);try{await _.b.post("bills","/payments/".concat(e),{});let n=i.map(n=>(n.billID==e&&(n.paid=!0),n));r(n)}catch(e){(0,N.q)(e)}s(!1)}async function o(e){s(!0);try{await _.b.del("bills","/bills/".concat(e),{}),r(n=>[...n.filter(n=>n.billID!=e)])}catch(e){(0,N.q)(e)}s(!1)}return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"Home",children:(0,l.jsxs)("div",{className:"notes",children:[(0,l.jsx)(x.Z,{variant:"h5",component:"div",sx:{mt:4,mx:2},children:"Your bills"}),(0,l.jsx)(C.Z,{children:(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(w.Z,{children:[(0,l.jsxs)(v.Z,{divider:!0,href:"/bills/new",sx:{py:3,borderRadius:"10px"},children:[(0,l.jsx)(D.HlX,{size:17}),(0,l.jsx)("span",{className:"ms-2 fw-bold",children:"Create a new bill"})]}),i.map(e=>(0,l.jsx)(Z,{bill:e,isLoading:t,onPayBill:a,onDeleteBill:o},e.billID))]})})})]})})})};var E=!0,P=k},454:function(){}},function(e){e.O(0,[963,648,145,248,774,888,179],function(){return e(e.s=6380)}),_N_E=e.O()}]);